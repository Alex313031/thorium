From ee4798c1c5b8cf96938e669a519c8b86c050f44e Mon Sep 17 00:00:00 2001
From: Ho Cheung <uioptt24@gmail.com>
Date: Thu, 16 Feb 2023 02:36:51 +0000
Subject: [PATCH] Revert "[cleanup] Remove JPEG XL image type emulation."

This reverts commit 7213145b3affbe436aa7ef5f50f8698181b39606.

Reason for revert: for local testing

For local testing only, do not review and merge

Bug: chromium:1178058,chromium:1416530
Change-Id: I312fc66973f46707cceb8af89ee1fe2c2865b944
---
 front_end/Images/src/chromeSelect.svg         |  2 +-
 front_end/Images/src/chromeSelectDark.svg     |  2 +-
 front_end/Images/src/help_outline.svg         |  2 +-
 front_end/Images/src/ic_checkmark_16x16.svg   |  2 +-
 .../Images/src/ic_command_go_to_line.svg      |  4 +--
 front_end/Images/src/ic_command_help.svg      |  2 +-
 front_end/Images/src/ic_info_black_18dp.svg   |  2 +-
 front_end/Images/src/ic_preview_feature.svg   |  2 +-
 front_end/Images/src/info-icon.svg            |  2 +-
 front_end/Images/src/largeIcons.svg           |  9 ++++---
 front_end/Images/src/mediumIcons.svg          |  4 +--
 front_end/Images/src/switcherIcon.svg         |  2 +-
 front_end/Images/src/three_dots_menu_icon.svg |  2 +-
 front_end/Images/src/treeoutlineTriangles.svg |  3 ++-
 front_end/Images/src/triangle-collapsed.svg   |  2 +-
 front_end/Images/src/triangle-expanded.svg    |  2 +-
 front_end/core/sdk/EmulationModel.ts          |  7 ++++-
 front_end/core/sdk/sdk-meta.ts                | 26 ++++++++++++++++++
 .../inspector_main/RenderingOptions.ts        | 27 ++++++++++++++++++-
 front_end/generated/protocol.ts               |  1 +
 .../front_end/helpers/EnvironmentHelpers.ts   |  1 +
 21 files changed, 84 insertions(+), 22 deletions(-)

diff --git a/front_end/Images/src/chromeSelect.svg b/front_end/Images/src/chromeSelect.svg
index 1ed8360c7..c285aac61 100644
--- a/front_end/Images/src/chromeSelect.svg
+++ b/front_end/Images/src/chromeSelect.svg
@@ -1 +1 @@
-<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 16"><path d="M19 11l-7.7942-7.5h15.5884L19 11z" fill="#000" fill-opacity=".83"/></svg>
\ No newline at end of file
+<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 16"><path d="M19 11l-7.7942-7.5h15.5884L19 11z" fill="#1a73e8"/></svg>
diff --git a/front_end/Images/src/chromeSelectDark.svg b/front_end/Images/src/chromeSelectDark.svg
index 7a6c3a7ad..c285aac61 100644
--- a/front_end/Images/src/chromeSelectDark.svg
+++ b/front_end/Images/src/chromeSelectDark.svg
@@ -1 +1 @@
-<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 16"><path d="M19 11l-7.7942-7.5h15.5884L19 11z" fill="#fff"/></svg>
\ No newline at end of file
+<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 16"><path d="M19 11l-7.7942-7.5h15.5884L19 11z" fill="#1a73e8"/></svg>
diff --git a/front_end/Images/src/help_outline.svg b/front_end/Images/src/help_outline.svg
index 3e980a469..8a2b20e10 100755
--- a/front_end/Images/src/help_outline.svg
+++ b/front_end/Images/src/help_outline.svg
@@ -1 +1 @@
-<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>
\ No newline at end of file
+<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" fill="#1967d2"/></svg>
diff --git a/front_end/Images/src/ic_checkmark_16x16.svg b/front_end/Images/src/ic_checkmark_16x16.svg
index f306be060..e9de7f1f1 100644
--- a/front_end/Images/src/ic_checkmark_16x16.svg
+++ b/front_end/Images/src/ic_checkmark_16x16.svg
@@ -1,3 +1,3 @@
 <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
-<path d="M8 0.5C3.86 0.5 0.5 3.86 0.5 8C0.5 12.14 3.86 15.5 8 15.5C12.14 15.5 15.5 12.14 15.5 8C15.5 3.86 12.14 0.5 8 0.5ZM8 14C4.6925 14 2 11.3075 2 8C2 4.6925 4.6925 2 8 2C11.3075 2 14 4.6925 14 8C14 11.3075 11.3075 14 8 14ZM6.5 9.65L4.55 7.7L3.5 8.75L6.5 11.75L12.5 5.75L11.45 4.7L6.5 9.65Z" fill="black"/>
+<path d="M8 0.5C3.86 0.5 0.5 3.86 0.5 8C0.5 12.14 3.86 15.5 8 15.5C12.14 15.5 15.5 12.14 15.5 8C15.5 3.86 12.14 0.5 8 0.5ZM8 14C4.6925 14 2 11.3075 2 8C2 4.6925 4.6925 2 8 2C11.3075 2 14 4.6925 14 8C14 11.3075 11.3075 14 8 14ZM6.5 9.65L4.55 7.7L3.5 8.75L6.5 11.75L12.5 5.75L11.45 4.7L6.5 9.65Z" fill="#009802"/>
 </svg>
diff --git a/front_end/Images/src/ic_command_go_to_line.svg b/front_end/Images/src/ic_command_go_to_line.svg
index beaaa64b6..7f2cc9948 100644
--- a/front_end/Images/src/ic_command_go_to_line.svg
+++ b/front_end/Images/src/ic_command_go_to_line.svg
@@ -1,4 +1,4 @@
 <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
-<path d="M10 6.83333C10 6.92538 9.91046 7 9.8 7H8.2C8.08954 7 8 6.92538 8 6.83333V5.16667C8 5.07462 8.08954 5 8.2 5H9.8C9.91046 5 10 5.07462 10 5.16667V6.83333Z" fill="#202124"/>
-<path d="M10 12.8333C10 12.9254 9.91046 13 9.8 13H8.2C8.08954 13 8 12.9254 8 12.8333V11.1667C8 11.0746 8.08954 11 8.2 11H9.8C9.91046 11 10 11.0746 10 11.1667V12.8333Z" fill="#202124"/>
+<path d="M10 6.83333C10 6.92538 9.91046 7 9.8 7H8.2C8.08954 7 8 6.92538 8 6.83333V5.16667C8 5.07462 8.08954 5 8.2 5H9.8C9.91046 5 10 5.07462 10 5.16667V6.83333Z" fill="#1A73E8"/>
+<path d="M10 12.8333C10 12.9254 9.91046 13 9.8 13H8.2C8.08954 13 8 12.9254 8 12.8333V11.1667C8 11.0746 8.08954 11 8.2 11H9.8C9.91046 11 10 11.0746 10 11.1667V12.8333Z" fill="#1A73E8"/>
 </svg>
diff --git a/front_end/Images/src/ic_command_help.svg b/front_end/Images/src/ic_command_help.svg
index 85fca75bf..ad8a00b98 100644
--- a/front_end/Images/src/ic_command_help.svg
+++ b/front_end/Images/src/ic_command_help.svg
@@ -1,3 +1,3 @@
 <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
-<path fill-rule="evenodd" clip-rule="evenodd" d="M4 9C4 6.24 6.24 4 9 4C11.76 4 14 6.24 14 9C14 11.76 11.76 14 9 14C6.24 14 4 11.76 4 9ZM9.5 11V12H8.5V11H9.5ZM9 13C6.795 13 5 11.205 5 9C5 6.795 6.795 5 9 5C11.205 5 13 6.795 13 9C13 11.205 11.205 13 9 13ZM7 8C7 6.895 7.895 6 9 6C10.105 6 11 6.895 11 8C11 8.64146 10.605 8.98666 10.2204 9.32277C9.85551 9.64163 9.5 9.95231 9.5 10.5H8.5C8.5 9.58936 8.97106 9.22829 9.38522 8.91084C9.71012 8.6618 10 8.43961 10 8C10 7.45 9.55 7 9 7C8.45 7 8 7.45 8 8H7Z" fill="#202124"/>
+<path fill-rule="evenodd" clip-rule="evenodd" d="M4 9C4 6.24 6.24 4 9 4C11.76 4 14 6.24 14 9C14 11.76 11.76 14 9 14C6.24 14 4 11.76 4 9ZM9.5 11V12H8.5V11H9.5ZM9 13C6.795 13 5 11.205 5 9C5 6.795 6.795 5 9 5C11.205 5 13 6.795 13 9C13 11.205 11.205 13 9 13ZM7 8C7 6.895 7.895 6 9 6C10.105 6 11 6.895 11 8C11 8.64146 10.605 8.98666 10.2204 9.32277C9.85551 9.64163 9.5 9.95231 9.5 10.5H8.5C8.5 9.58936 8.97106 9.22829 9.38522 8.91084C9.71012 8.6618 10 8.43961 10 8C10 7.45 9.55 7 9 7C8.45 7 8 7.45 8 8H7Z" fill="#1967d2"/>
 </svg>
diff --git a/front_end/Images/src/ic_info_black_18dp.svg b/front_end/Images/src/ic_info_black_18dp.svg
index f181e07f3..f2faba7bf 100644
--- a/front_end/Images/src/ic_info_black_18dp.svg
+++ b/front_end/Images/src/ic_info_black_18dp.svg
@@ -1 +1 @@
-<svg height="18" viewBox="0 0 48 48" width="18" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h48v48h-48z" fill="none"/><path d="m24 4c-11.05 0-20 8.95-20 20s8.95 20 20 20 20-8.95 20-20-8.95-20-20-20zm2 30h-4v-12h4zm0-16h-4v-4h4z"/></svg>
\ No newline at end of file
+<svg height="18" viewBox="0 0 48 48" width="18" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h48v48h-48z" fill="none"/><path d="m24 4c-11.05 0-20 8.95-20 20s8.95 20 20 20 20-8.95 20-20-8.95-20-20-20zm2 30h-4v-12h4zm0-16h-4v-4h4z" fill="#1967d2"/></svg>
diff --git a/front_end/Images/src/ic_preview_feature.svg b/front_end/Images/src/ic_preview_feature.svg
index bfb3e5f04..da6176df5 100644
--- a/front_end/Images/src/ic_preview_feature.svg
+++ b/front_end/Images/src/ic_preview_feature.svg
@@ -1,3 +1,3 @@
 <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
-<path d="M11 2H5V3H6.5V6.5L3.08638 11.4308C2.62722 12.094 3.10191 13 3.90857 13H12.0914C12.8981 13 13.3728 12.094 12.9136 11.4308L9.5 6.5V3H11V2Z" fill="black"/>
+<path d="M11 2H5V3H6.5V6.5L3.08638 11.4308C2.62722 12.094 3.10191 13 3.90857 13H12.0914C12.8981 13 13.3728 12.094 12.9136 11.4308L9.5 6.5V3H11V2Z" fill="#87FFC5"/>
 </svg>
diff --git a/front_end/Images/src/info-icon.svg b/front_end/Images/src/info-icon.svg
index 9d8363b3a..dbd889529 100644
--- a/front_end/Images/src/info-icon.svg
+++ b/front_end/Images/src/info-icon.svg
@@ -1 +1 @@
-<svg width="11" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="5.5" cy="6" r="5" stroke="#202124"/><path fill="#202124" d="M5 4.5h1v5H5zM5 2.5h1v1H5z"/></svg>
\ No newline at end of file
+<svg width="11" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="5.5" cy="6" r="5" stroke="#1967d2"/><path fill="#1967d2" d="M5 4.5h1v5H5zM5 2.5h1v1H5z"/></svg>
diff --git a/front_end/Images/src/largeIcons.svg b/front_end/Images/src/largeIcons.svg
index 30b4495da..4c2714538 100644
--- a/front_end/Images/src/largeIcons.svg
+++ b/front_end/Images/src/largeIcons.svg
@@ -569,17 +569,20 @@
          transform="matrix(1.4142,0,0,1.4142,-278.88,-36.772)"
          d="m 209.92,31.305 a 1.0607,1.0607 0 1 1 -2.1213,0 1.0607,1.0607 0 1 1 2.1213,0 z"
          id="path274"
-         inkscape:connector-curvature="0" />
+         inkscape:connector-curvature="0"
+         style="fill:#1A73E8" />
       <path
          transform="matrix(1.4142,0,0,1.4142,-278.88,-31.772)"
          d="m 209.92,31.305 a 1.0607,1.0607 0 1 1 -2.1213,0 1.0607,1.0607 0 1 1 2.1213,0 z"
          id="path276"
-         inkscape:connector-curvature="0" />
+         inkscape:connector-curvature="0"
+         style="fill:#1A73E8" />
       <path
          transform="matrix(1.4142,0,0,1.4142,-278.88,-26.772)"
          d="m 209.92,31.305 a 1.0607,1.0607 0 1 1 -2.1213,0 1.0607,1.0607 0 1 1 2.1213,0 z"
          id="path278"
-         inkscape:connector-curvature="0" />
+         inkscape:connector-curvature="0"
+         style="fill:#1A73E8" />
     </g>
   </g>
   <g
diff --git a/front_end/Images/src/mediumIcons.svg b/front_end/Images/src/mediumIcons.svg
index acdcc9322..06abcc853 100644
--- a/front_end/Images/src/mediumIcons.svg
+++ b/front_end/Images/src/mediumIcons.svg
@@ -501,7 +501,7 @@
        d="M 8,1 C 4.136,1 1,4.136 1,8 c 0,3.864 3.136,7 7,7 3.864,0 7,-3.136 7,-7 C 15,4.136 11.864,1 8,1 Z M 2.5,8 C 2.5,4.968125 4.968125,2.5 8,2.5 c 3.031875,0 5.5,2.468125 5.5,5.5 0,3.031875 -2.468125,5.5 -5.5,5.5 C 4.968125,13.5 2.5,11.031875 2.5,8 Z M 9,12 V 7 H 7 v 5 z M 7,6 H 9 V 4 H 7 Z"
        id="path6350"
        inkscape:connector-curvature="0"
-       style="fill:#000000" />
+       style="fill:#1967d2" />
   </g>
   <g
      mask="url(#path4453-6-mask)"
@@ -1055,7 +1055,7 @@
   <g
      transform="translate(96,64)"
      id="g216"
-     style="fill:#000000">
+     style="fill:#009802">
     <path
        d="M 8,0.5 C 3.86,0.5 0.5,3.86 0.5,8 c 0,4.14 3.36,7.5 7.5,7.5 4.14,0 7.5,-3.36 7.5,-7.5 C 15.5,3.86 12.14,0.5 8,0.5 Z M 8,14 C 4.6925,14 2,11.3075 2,8 2,4.6925 4.6925,2 8,2 c 3.3075,0 6,2.6925 6,6 0,3.3075 -2.6925,6 -6,6 z M 6.5,9.65 4.55,7.7 3.5,8.75 l 3,3 6,-6 -1.05,-1.05 z"
        id="path204" />
diff --git a/front_end/Images/src/switcherIcon.svg b/front_end/Images/src/switcherIcon.svg
index 1d22450d9..1b31e6d9f 100644
--- a/front_end/Images/src/switcherIcon.svg
+++ b/front_end/Images/src/switcherIcon.svg
@@ -51,7 +51,7 @@
      inkscape:current-layer="svg22" />
   <path
      d="m 5.2405,6.0043674 h 5.518841 L 7.9999213,2.1505 Z m 0,3.9915058 h 5.518841 L 7.9999213,13.84974 Z"
-     fill="#000000"
+     fill="#1A73E8"
      id="path20"
      style="stroke-width:0.949681" />
 </svg>
diff --git a/front_end/Images/src/three_dots_menu_icon.svg b/front_end/Images/src/three_dots_menu_icon.svg
index f8d5226b5..efd9f66a4 100644
--- a/front_end/Images/src/three_dots_menu_icon.svg
+++ b/front_end/Images/src/three_dots_menu_icon.svg
@@ -1 +1 @@
-<svg xmlns="http://www.w3.org/2000/svg" width="4" height="14.029" viewBox="0 0 1.058 3.712"><g fill-rule="evenodd"><path d="M.926.533a.397.397 0 11-.794 0 .397.397 0 11.794 0zM.926 1.856a.397.397 0 11-.794 0 .397.397 0 11.794 0zM.926 3.179a.397.397 0 11-.794 0 .397.397 0 11.794 0z"/></g></svg>
\ No newline at end of file
+<svg xmlns="http://www.w3.org/2000/svg" width="4" height="14.029" viewBox="0 0 1.058 3.712"><g fill="#1A73E8" fill-rule="evenodd"><path d="M.926.533a.397.397 0 11-.794 0 .397.397 0 11.794 0zM.926 1.856a.397.397 0 11-.794 0 .397.397 0 11.794 0zM.926 3.179a.397.397 0 11-.794 0 .397.397 0 11.794 0z"/></g></svg>
diff --git a/front_end/Images/src/treeoutlineTriangles.svg b/front_end/Images/src/treeoutlineTriangles.svg
index e27a14653..6ce8f9da0 100644
--- a/front_end/Images/src/treeoutlineTriangles.svg
+++ b/front_end/Images/src/treeoutlineTriangles.svg
@@ -16,7 +16,8 @@
    inkscape:version="0.92.2 5c3e80d, 2017-08-06"
    sodipodi:docname="treeoutlineTriangles.svg"
    inkscape:export-xdpi="192"
-   inkscape:export-ydpi="192">
+   inkscape:export-ydpi="192"
+   fill="#1A73E8">
   <defs
      id="defs3622" />
   <sodipodi:namedview
diff --git a/front_end/Images/src/triangle-collapsed.svg b/front_end/Images/src/triangle-collapsed.svg
index 56ca9d289..666a4936e 100644
--- a/front_end/Images/src/triangle-collapsed.svg
+++ b/front_end/Images/src/triangle-collapsed.svg
@@ -1 +1 @@
-<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M 15 10 v 28 l 20 -14 L 15 10" /></svg>
\ No newline at end of file
+<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M 15 10 v 28 l 20 -14 L 15 10" fill="#1A73E8"/></svg>
diff --git a/front_end/Images/src/triangle-expanded.svg b/front_end/Images/src/triangle-expanded.svg
index 22e019390..0085dc6b4 100644
--- a/front_end/Images/src/triangle-expanded.svg
+++ b/front_end/Images/src/triangle-expanded.svg
@@ -1 +1 @@
-<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M 10 15 h 28 l -14 20 L 10 15" /></svg>
+<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M 10 10 h 28 l -14 20 L 10 10" fill="#1A73E8"/></svg>
diff --git a/front_end/core/sdk/EmulationModel.ts b/front_end/core/sdk/EmulationModel.ts
index f0ab4f584..2fe180814 100644
--- a/front_end/core/sdk/EmulationModel.ts
+++ b/front_end/core/sdk/EmulationModel.ts
@@ -152,6 +152,7 @@ export class EmulationModel extends SDKModel<void> {
     }
 
     const avifFormatDisabledSetting = Common.Settings.Settings.instance().moduleSetting('avifFormatDisabled');
+    const jpegXlFormatDisabledSetting = Common.Settings.Settings.instance().moduleSetting('jpegXlFormatDisabled');
     const webpFormatDisabledSetting = Common.Settings.Settings.instance().moduleSetting('webpFormatDisabled');
 
     const updateDisabledImageFormats = (): void => {
@@ -159,6 +160,9 @@ export class EmulationModel extends SDKModel<void> {
       if (avifFormatDisabledSetting.get()) {
         types.push(Protocol.Emulation.DisabledImageType.Avif);
       }
+      if (jpegXlFormatDisabledSetting.get()) {
+        types.push(Protocol.Emulation.DisabledImageType.Jxl);
+      }
       if (webpFormatDisabledSetting.get()) {
         types.push(Protocol.Emulation.DisabledImageType.Webp);
       }
@@ -167,8 +171,9 @@ export class EmulationModel extends SDKModel<void> {
 
     avifFormatDisabledSetting.addChangeListener(updateDisabledImageFormats);
     webpFormatDisabledSetting.addChangeListener(updateDisabledImageFormats);
+    jpegXlFormatDisabledSetting.addChangeListener(updateDisabledImageFormats);
 
-    if (avifFormatDisabledSetting.get() || webpFormatDisabledSetting.get()) {
+    if (avifFormatDisabledSetting.get() || jpegXlFormatDisabledSetting.get() || webpFormatDisabledSetting.get()) {
       updateDisabledImageFormats();
     }
 
diff --git a/front_end/core/sdk/sdk-meta.ts b/front_end/core/sdk/sdk-meta.ts
index 10fd7ae97..171771f0d 100644
--- a/front_end/core/sdk/sdk-meta.ts
+++ b/front_end/core/sdk/sdk-meta.ts
@@ -274,6 +274,14 @@ const UIStrings = {
   */
   enableAvifFormat: 'Enable `AVIF` format',
   /**
+  *@description Title of a setting that disables JPEG XL format
+  */
+  disableJpegXlFormat: 'Disable `JPEG XL` format',
+  /**
+  *@description Title of a setting that enables JPEG XL format
+  */
+  enableJpegXlFormat: 'Enable `JPEG XL` format',
+  /**
   *@description Title of a setting that disables WebP format
   */
   disableWebpFormat: 'Disable `WebP` format',
@@ -959,6 +967,24 @@ Common.Settings.registerSettingExtension({
   defaultValue: false,
 });
 
+Common.Settings.registerSettingExtension({
+  category: Common.Settings.SettingCategory.RENDERING,
+  settingName: 'jpegXlFormatDisabled',
+  settingType: Common.Settings.SettingType.BOOLEAN,
+  storageType: Common.Settings.SettingStorageType.Session,
+  options: [
+    {
+      value: true,
+      title: i18nLazyString(UIStrings.disableJpegXlFormat),
+    },
+    {
+      value: false,
+      title: i18nLazyString(UIStrings.enableJpegXlFormat),
+    },
+  ],
+  defaultValue: false,
+});
+
 Common.Settings.registerSettingExtension({
   category: Common.Settings.SettingCategory.RENDERING,
   settingName: 'webpFormatDisabled',
diff --git a/front_end/entrypoints/inspector_main/RenderingOptions.ts b/front_end/entrypoints/inspector_main/RenderingOptions.ts
index bc3da3d56..2a4cc7739 100644
--- a/front_end/entrypoints/inspector_main/RenderingOptions.ts
+++ b/front_end/entrypoints/inspector_main/RenderingOptions.ts
@@ -167,6 +167,11 @@ const UIStrings = {
   */
   disableAvifImageFormat: 'Disable `AVIF` image format',
   /**
+  * @description The name of a checkbox setting in the Rendering tool. This setting disables the
+  * page from loading images with the JPEG XL format.
+  */
+  disableJpegXlImageFormat: 'Disable `JPEG XL` image format',
+  /**
   * @description Explanation text for both the 'Disable AVIF image format' and 'Disable WebP image
   * format' settings in the Rendering tool.
   */
@@ -200,6 +205,17 @@ const supportsPrefersContrast = (): boolean => {
   return window.matchMedia(query).media === query;
 };
 
+const supportsJpegXl = async(): Promise<boolean> => {
+  const JPEG_XL_IMAGE_URL = 'data:image/jxl;base64,/wr/BwiDBAwASyAY';
+  const promise = new Promise<boolean>((resolve): void => {
+    const img = document.createElement('img');
+    img.onload = (): void => resolve(true);
+    img.onerror = (): void => resolve(false);
+    img.src = JPEG_XL_IMAGE_URL;
+  });
+  return promise;
+};
+
 let renderingOptionsViewInstance: RenderingOptionsView;
 
 export class RenderingOptionsView extends UI.Widget.VBox {
@@ -276,11 +292,20 @@ export class RenderingOptionsView extends UI.Widget.VBox {
         i18nString(UIStrings.disableAvifImageFormat), i18nString(UIStrings.requiresAPageReloadToApplyAnd),
         Common.Settings.Settings.instance().moduleSetting('avifFormatDisabled'));
 
-    this.#appendCheckbox(
+    const webpCheckbox = this.#appendCheckbox(
         i18nString(UIStrings.disableWebpImageFormat), i18nString(UIStrings.requiresAPageReloadToApplyAnd),
         Common.Settings.Settings.instance().moduleSetting('webpFormatDisabled'));
 
     this.contentElement.createChild('div').classList.add('panel-section-separator');
+
+    void supportsJpegXl().then(hasSupport => {
+      if (!hasSupport) {
+        return;
+      }
+      webpCheckbox.before(this.#createCheckbox(
+          i18nString(UIStrings.disableJpegXlImageFormat), i18nString(UIStrings.requiresAPageReloadToApplyAnd),
+          Common.Settings.Settings.instance().moduleSetting('jpegXlFormatDisabled')));
+    });
   }
 
   static instance(opts: {
diff --git a/front_end/generated/protocol.ts b/front_end/generated/protocol.ts
index 5f2cdc8ac..618adb596 100644
--- a/front_end/generated/protocol.ts
+++ b/front_end/generated/protocol.ts
@@ -5310,6 +5310,7 @@ export namespace Emulation {
   export const enum DisabledImageType {
     Avif = 'avif',
     Webp = 'webp',
+    Jxl = "Jxl",
   }
 
   export interface CanEmulateResponse extends ProtocolResponseWithError {
diff --git a/test/unittests/front_end/helpers/EnvironmentHelpers.ts b/test/unittests/front_end/helpers/EnvironmentHelpers.ts
index fde49b378..af51fdbd2 100644
--- a/test/unittests/front_end/helpers/EnvironmentHelpers.ts
+++ b/test/unittests/front_end/helpers/EnvironmentHelpers.ts
@@ -150,6 +150,7 @@ export async function initializeGlobalVars({reset = true} = {}) {
     createSettingValue(Common.Settings.SettingCategory.RENDERING, 'showScrollBottleneckRects', false),
     createSettingValue(Common.Settings.SettingCategory.RENDERING, 'showWebVitals', false),
     createSettingValue(Common.Settings.SettingCategory.RENDERING, 'webpFormatDisabled', false),
+    createSettingValue(Common.Settings.SettingCategory.RENDERING, 'jpegXlFormatDisabled', false),
     createSettingValue(Common.Settings.SettingCategory.SOURCES, 'allowScrollPastEof', true),
     createSettingValue(Common.Settings.SettingCategory.SOURCES, 'cssSourceMapsEnabled', true),
     createSettingValue(Common.Settings.SettingCategory.SOURCES, 'inlineVariableValues', true),
-- 
2.34.1

